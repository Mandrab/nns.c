<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>nns.c: NNS: Nanowire Network Simulator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">nns.c<span id="projectnumber">&#160;1.0.1</span>
   </div>
   <div id="projectbrief">Nanowire Network simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">NNS: Nanowire Network Simulator </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <code>nns.c</code> is a C library that provides types and functions for the high performance simulation of Nanowire Networks. Specifically, it focuses on the randomly-created devices developed at the Polytechnic of Turin by Gianluca Milano, Enrique Miranda and Carlo Ricciardi. The code allows performing analysis of the structural and functional connectivity of the memristive network. The library is inspired by the code used in the paper <a href="https://doi.org/10.1016/j.neunet.2022.02.022"><em>Connectome of memristive nanowire networks through graph theory</em></a>, which can be found <a href="https://github.com/MilanoGianluca/Memristive_Nanowire_Networks_Connectome">here</a>.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Table of Contents</h1>
<ol type="1">
<li><a href="https://github.com/Mandrab/nns.c?tab=readme-ov-file#software-design">Software design</a></li>
<li><a href="https://github.com/Mandrab/nns.c?tab=readme-ov-file#requirements">Requirements</a></li>
<li><a href="https://github.com/Mandrab/nns.c?tab=readme-ov-file#installation">Installation</a><ol type="a">
<li>Linux</li>
<li>macOS</li>
<li>Windows</li>
</ol>
</li>
<li><a href="https://github.com/Mandrab/nns.c?tab=readme-ov-file#usage">Usage</a></li>
<li><a href="https://github.com/Mandrab/nns.c?tab=readme-ov-file#troubleshoot">Troubleshoot</a></li>
<li><a href="https://github.com/Mandrab/nns.c?tab=readme-ov-file#credits">Credits</a></li>
</ol>
<h1><a class="anchor" id="autotoc_md2"></a>
Software design</h1>
<p>The main components of the simulator are:</p><ol type="1">
<li><code>datasheet</code>: Represents the static information of the Nanowire Network, such as the number of nanowires, their length, etc.</li>
<li><code><a class="el" href="structnetwork__topology.html" title="Topology of the Nanowire Network. It contains information about the physical placement of nanowires a...">network_topology</a></code>: Contains the physical distribution of the nanowires and their junctions.</li>
<li><code><a class="el" href="structnetwork__state.html" title="Electrical state of the Nanowire Network. It contains the varying values of the junctions and the vol...">network_state</a></code>: Contains the dynamic (or instantaneous) state of the Nanowire Network, represented as the equivalent electrical circuit.</li>
<li><code><a class="el" href="structconnected__component.html" title="Connected component of the Nanowire Network. It contains all the information needed to identify the n...">connected_component</a></code>: Represents a connected group of nanowires inside the Nanowire Network, and contains the information to address them in the &lsquo;network state&rsquo;.</li>
</ol>
<p>An example of their relationship is shown in the following diagram:</p>
<div class="image">
<img src="structure.drawio.png" alt=""/>
<div class="caption">
Structural design of the simulator data</div></div>
    <p>The stimulation of the NN uses the <code>interface</code> and <code>mea</code> components, that specify how sources, grounds, and loads connect to the NN. Specifically, an interface allows to select all the possible nanowires as sources / grounds / loads. A <a class="el" href="structMEA.html" title="Represent a Micro-Electrode Array of 16 electrodes (physically sound). Save their position and the in...">MEA</a> limits instead the choice to nanowires positioned near to physical electrodes, allowing a more realistic configuration.</p>
<div class="image">
<img src="connection.drawio.png" alt=""/>
<div class="caption">
Nanowire network connection logic</div></div>
    <h1><a class="anchor" id="autotoc_md3"></a>
Requirements</h1>
<ul>
<li>GNU Scientific Library for reproducible random number generation</li>
<li>LAPACK with the C interface LAPACKE</li>
<li>OpenBLAS for the parallelization of the LAPACK routines</li>
<li>OpenMP for the parallelization of some simulator routines</li>
<li>[OPTIONAL] Doxygen for the generation of the documentation</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
Installation</h1>
<p>Overall, the steps to compile and install the simulator are the following:</p>
<ol type="1">
<li>To compile the source code, examples, and tests: <code>cmake . &amp;&amp; make</code></li>
<li>To install the library system-wide: <code>sudo make install</code></li>
</ol>
<p>Nevertheless, the installation slightly vary across different Operative Systems. A brief (and not exhaustive) step-guide if given below for each tested OS.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Linux</h2>
<p>Tested on an Arch installation.</p>
<p>Due to the variety of Linux installations, a precise guide cannot be provided. Assuming that you have installed all the required dependencies in the correct locations, the installation is expected to consist of the following steps:</p>
<div class="fragment"><div class="line">$ cmake .</div>
<div class="line">$ make</div>
<div class="line">$ sudo make install</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6"></a>
macOS</h2>
<p>Tested on a macOS Big Sur installation.</p>
<p>The installation under macOS requires some attentions. Firstly, the Clang compiler used does not yet support the empty initialization of arrays (C23), and cause some problems with OpenMP. To solve these issues, the use of a recent version of GCC and C++ compilers is recommended. However, <code>gcc</code> in a macOS is a link to the <code>clang</code> compiler. To overcome this problem, it is necessary to specify the gcc version, targeting a specific installation of the compiler. An example is available below, where I assume GCC-13 e C++-13 to be installed. Another issue relates some brew installations that are not directly accessible by CMake (e.g., OpenBLAS). To allow the compilation to succeed, it is needed to specify the location of those installed libraries. An example is available below.</p>
<p>Installing the dependencies:</p>
<div class="fragment"><div class="line">$ /bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)&quot;</div>
<div class="line">$ brew install cmake</div>
<div class="line">$ brew install gsl</div>
<div class="line">$ brew install openblas</div>
<div class="line">$ brew install suitesparse</div>
<div class="line">$ brew install lapack</div>
</div><!-- fragment --><p>Installing the simulator:</p>
<div class="fragment"><div class="line">$ cmake . \</div>
<div class="line">    -DCMAKE_C_COMPILER=/usr/local/bin/gcc-13</div>
<div class="line">    -DCMAKE_CXX_COMPILER=/usr/local/bin/c++-13 \</div>
<div class="line">    -DCMAKE_PREFIX_PATH=&quot;/usr/local/opt/openblas&quot;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md7"></a>
Windows</h2>
<p>Not tested (yet).</p>
<p>The simulator is not currently tested under Windows. The use of the Windows Subsystem for Linux (WSL) is expected to work.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Usage</h1>
<p>Once the simulator is installed, you can write your code. For a brief introduction, please check the test and example codes. They represent typical usage of the library.</p>
<p>Running the tests: </p><div class="fragment"><div class="line">$ cd tests</div>
<div class="line">$ ctest</div>
<div class="line">$ cd ..</div>
</div><!-- fragment --><p>Running the examples:</p>
<div class="fragment"><div class="line">$ ./examples/[EXAMPLE NAME].elf</div>
</div><!-- fragment --><p>Linking the library in your code:</p>
<div class="fragment"><div class="line">$ gcc [CODE NAME].c -lnns</div>
</div><!-- fragment --><p>Linking the library in your code (CMake):</p>
<div class="fragment"><div class="line">$ find_library(NNS_LIB nns)</div>
<div class="line">$ target_link_libraries(${PROJECT_NAME} ${NNS_LIB})</div>
</div><!-- fragment --><p>Running a Valgrind memory-leak test:</p>
<div class="fragment"><div class="line">$ valgrind --leak-check=yes --log-file=valgrind.rpt [EXECUTABLE NAME].elf</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md9"></a>
Troubleshoot</h1>
<ul>
<li>If running <code>cmake .</code> you get something such as <code>Could NOT find BLAS (missing: BLAS_LIBRARIES)</code>, ensure that BLAS is installed in you system and add something such as <code>-DBLAS_LIBRARIES=/usr/lib64/libblas.so</code> to the call.</li>
<li>If running <code>cmake .</code> you get something such as <code>Could NOT find LAPACK (missing: LAPACK_LIBRARIES)</code>, ensure that LAPACK is installed in you system and add something such as <code>-DLAPACK_LIBRARIES=/usr/lib32/liblapack.so</code> to the call.</li>
<li>A segmentation fault may happen if too large networks are simulated. To solve this problem it is simply needed to increase the memory that the program can allocate. See: <code>ulimit -s 65535</code>.</li>
<li>The Valgrind test <a href="https://medium.com/@auraham/pseudo-memory-leaks-when-using-openmp-11a383cc4cf9">does not work correctly</a> when used with OpenMP. Therefore, to perform the test is necessary to compile the library without OpenMP and with a sequential implementation of BLAS.</li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
Credits</h1>
<ul>
<li><a href="https://github.com/noemival97">Noemi Valentini</a> helped troubleshooting the CMake automation in macOS, and pointed out the lack of a known RNG producing the same results across different distributions. </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
